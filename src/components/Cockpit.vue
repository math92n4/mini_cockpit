<template>

<div>
  <div v-if="!carSelected">
    <div class="table-modal border">
        <div class="top">
            <h2>VORES SALG</h2>

            <div class="right">

              <div class="inputs">

                <input type="text" v-model="inputText">
                <input type="date" v-model="inputDate">
                
                <button @click="filterCars">Søg</button>
              </div>

                <button @click="openModal">Opret et salg</button>
            </div>
            

        </div>
        
        <table>
            <thead>
                <tr>
                    <th v-for="header in headers" :key="header.value">{{ header.label }}</th>
                </tr>
            </thead>

            <tbody>
                <tr v-for="(car) in paginatedCars" :key="car.productionNumber" @click="goToCar(car)">
                    <td>{{ car.productionNumber || 'Ikke sat' }}</td>
                    <td>{{ car.modelDescription && car.modelDescription !== 'null' ? car.modelDescription : 'Ikke sat' }}</td>
                    <td>{{ car.modelCode || 'Ikke sat' }}</td>
                    <td>{{ car.purchaseAgreementDate || 'Ikke sat' }}</td>

                    <td>
                      <svg v-if="car.sharepointData" width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M24.4562 19.9944C24.0214 19.9944 23.6688 20.3469 23.6688 20.7817C23.6688 21.2166 24.0214 21.5691 24.4562 21.5691C24.891 21.5691 25.2436 21.2166 25.2436 20.7817C25.2436 20.3469 24.891 19.9944 24.4562 19.9944ZM9.43656 19.9944C9.00172 19.9944 8.64919 20.3469 8.64919 20.7817C8.64919 21.2166 9.00172 21.5691 9.43656 21.5691C9.8714 21.5691 10.2239 21.2166 10.2239 20.7817C10.2239 20.3493 9.87498 19.9974 9.44253 19.9944H9.43656ZM27.7429 11.9298C27.2388 11.4622 26.5165 11.3148 25.8699 11.5481C25.3515 11.6876 25.0437 12.2209 25.1833 12.7393C25.1887 12.7601 25.1953 12.7804 25.2018 12.8007C25.2448 13.0071 25.3486 13.1962 25.5001 13.3435L25.339 13.7312L24.9632 13.6895L23.1737 9.34701C22.965 8.91038 22.5242 8.63182 22.0404 8.63123H11.9716C11.4783 8.63302 11.031 8.92231 10.8264 9.37087L9.03691 13.6775L8.61937 13.7193L8.45832 13.3316C8.60982 13.1842 8.71361 12.9952 8.75656 12.7888C8.92954 12.2806 8.65814 11.7282 8.14993 11.5546C8.12965 11.5475 8.10937 11.5415 8.08849 11.5361C7.43951 11.3059 6.71656 11.458 6.21551 11.9298C5.84509 12.3503 5.88625 12.991 6.30618 13.3608C6.31572 13.3692 6.32526 13.3769 6.33481 13.3853C6.62768 13.538 6.95277 13.6197 7.28323 13.6239L7.46814 14.0772C7.39895 14.1333 7.33691 14.1971 7.28323 14.2681L6.75832 14.9481C6.58056 15.1741 6.48393 15.4539 6.48393 15.7414V24.0326C6.48035 24.7341 7.04702 25.3055 7.74849 25.3091C7.75028 25.3091 7.75267 25.3091 7.75446 25.3091H10.1404C10.8395 25.3026 11.4026 24.7317 11.399 24.0326V23.4361C12.4309 23.4898 14.6081 23.5853 17.0538 23.5853C19.4994 23.5853 21.5095 23.4898 22.4997 23.4361V24.0326C22.4932 24.7311 23.0539 25.3026 23.7523 25.3091C23.7541 25.3091 23.7565 25.3091 23.7583 25.3091H26.1443C26.8457 25.3222 27.4255 24.7645 27.4387 24.0624C27.4387 24.0523 27.4387 24.0422 27.4387 24.0326V15.6818C27.4249 15.4008 27.3229 15.1312 27.1464 14.9123L26.6155 14.2621L26.4783 14.1249L26.6751 13.6418C27.0056 13.6376 27.3307 13.5559 27.6236 13.4032C28.0614 13.0536 28.133 12.416 27.784 11.9781C27.7709 11.9614 27.7572 11.9453 27.7429 11.9298ZM24.7246 16.1649C24.8523 16.5574 24.8266 16.9833 24.653 17.3579C24.5618 17.5345 24.4061 17.6693 24.2176 17.7337C23.7225 17.8768 23.126 17.3937 22.9113 16.6719C22.7836 16.2788 22.8117 15.8523 22.9888 15.4789C23.0759 15.2976 23.2334 15.1598 23.4243 15.0972C23.4833 15.0882 23.5442 15.0882 23.6032 15.0972C24.1591 15.1885 24.6029 15.609 24.7246 16.1589V16.1649ZM11.9299 9.85403C11.943 9.83316 11.9651 9.82003 11.9895 9.81824H22.0225H22.0702L23.6211 13.5523C22.2313 13.4449 20.0899 13.3495 16.9881 13.3495C13.8864 13.3495 11.7748 13.4449 10.3671 13.5463L11.9299 9.85403ZM9.16217 16.1589C9.2773 15.5988 9.72526 15.1676 10.2895 15.0733C10.3468 15.0644 10.4053 15.0644 10.4625 15.0733C10.6534 15.136 10.8109 15.2738 10.898 15.4551C11.0775 15.8273 11.1055 16.2556 10.9755 16.6481C10.7369 17.4056 10.1404 17.8947 9.67516 17.7456C9.48488 17.6848 9.3274 17.5494 9.23972 17.3698C9.0566 16.9916 9.02856 16.5574 9.16217 16.1589ZM10.218 24.0326C10.2215 24.0732 10.1929 24.1102 10.1523 24.1161H7.75446C7.71389 24.1102 7.68526 24.0732 7.68884 24.0326V22.9053C8.02288 22.9768 8.42849 23.0544 8.88182 23.12C9.33516 23.1856 9.89586 23.2691 10.2597 23.3109L10.218 24.0326ZM26.2457 24.0326C26.2493 24.0732 26.2206 24.1102 26.1801 24.1161H23.7941C23.7535 24.1102 23.7249 24.0732 23.7285 24.0326V23.3109L25.0527 23.12C25.4762 23.0544 25.8878 22.9768 26.2457 22.9053V24.0326ZM26.2457 21.6824C25.8937 21.76 25.3987 21.8614 24.8857 21.9449C23.973 22.0821 23.0962 22.1835 23.0485 22.1895C22.8695 22.1895 20.3046 22.3744 17.0836 22.3744C13.8625 22.3744 10.9874 22.1954 10.8801 22.1895C10.7727 22.1835 9.90182 22.0702 9.01902 21.9449C8.512 21.8614 8.02288 21.76 7.67691 21.6884V15.7235C7.66916 15.7044 7.66916 15.6829 7.67691 15.6639L8.20182 14.9839C8.21495 14.9785 8.23046 14.9785 8.24358 14.9839L8.84007 14.9063C8.58417 15.1992 8.3933 15.5428 8.27937 15.9144C8.07835 16.5419 8.13203 17.2231 8.42849 17.8112C8.64144 18.1983 8.99993 18.4841 9.42463 18.6046C9.56003 18.6445 9.70081 18.6648 9.84217 18.6642C10.8091 18.5813 11.6132 17.8858 11.8345 16.9403C12.0349 16.3152 11.9818 15.6358 11.6853 15.0495C11.6132 14.9165 11.5225 14.7942 11.4169 14.6856C12.759 14.614 14.5843 14.5544 16.9881 14.5544C19.392 14.5544 21.1636 14.614 22.4759 14.6856C22.3697 14.7954 22.2778 14.9176 22.2015 15.0495C21.911 15.6382 21.8639 16.317 22.0702 16.9403C22.2927 17.8846 23.0962 18.5795 24.0625 18.6642C24.2057 18.6648 24.3482 18.6451 24.486 18.6046C24.9036 18.4769 25.2519 18.187 25.4523 17.7993C25.7488 17.2112 25.8025 16.53 25.6015 15.9025C25.478 15.5255 25.2746 15.1795 25.005 14.8884L25.679 14.9958L26.2457 15.646C26.251 15.6656 26.251 15.6859 26.2457 15.7056V21.6824ZM19.5292 17.1014H14.3874C13.5356 17.0942 12.7167 17.4295 12.1148 18.0319C11.6203 18.5282 11.3507 19.2046 11.3692 19.9049C11.3692 20.4 12.0552 21.4498 12.765 21.4498H21.1516C21.8615 21.4498 22.5295 20.4 22.5474 19.9049C22.5629 19.2052 22.2939 18.5294 21.8018 18.0319C21.2 17.4295 20.381 17.0942 19.5292 17.1014ZM21.0502 20.2807H12.8664C12.7447 20.1686 12.6421 20.0379 12.5622 19.893C12.5538 19.5172 12.7006 19.1551 12.9678 18.8909C13.3406 18.5079 13.853 18.2926 14.3874 18.2944H19.5292C20.0619 18.292 20.573 18.5073 20.9429 18.8909C21.1988 19.139 21.3485 19.4772 21.3604 19.8333C21.2882 20.0021 21.1833 20.1542 21.0502 20.2807Z" fill="#1A420A"/>
                      </svg>
                      <svg v-else width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.6266 23.0133H14.6406C13.79 23.0053 12.972 23.34 12.3713 23.9427C11.8766 24.44 11.6066 25.118 11.624 25.8187C11.64 26.342 12.3173 27.4073 13.0646 27.4073H21.2026C21.95 27.4073 22.6273 26.342 22.6433 25.8187C22.6606 25.1173 22.39 24.4393 21.8953 23.9427C21.2953 23.34 20.4773 23.0053 19.6266 23.0133ZM21.0693 26.0733H13.1986C13.1006 25.9713 13.0193 25.8553 12.9573 25.728C12.9666 25.4047 13.0993 25.0973 13.3293 24.87C13.6786 24.526 14.152 24.3373 14.642 24.346H19.628C20.118 24.3373 20.5913 24.526 20.9406 24.87C21.17 25.0973 21.3033 25.4047 21.3126 25.728C21.2486 25.8553 21.1673 25.9713 21.0693 26.0733ZM9.84396 25.906C9.42263 25.906 9.08063 26.248 9.08063 26.6693C9.08063 27.0907 9.42263 27.4327 9.84396 27.4327C10.2653 27.4327 10.6073 27.0907 10.6073 26.6693C10.6073 26.2473 10.2653 25.906 9.84396 25.906ZM25.1786 26.6693C25.1786 26.248 24.8366 25.906 24.4153 25.906C23.994 25.906 23.652 26.248 23.652 26.6693C23.652 27.0907 23.994 27.4327 24.4153 27.4327C24.8366 27.4327 25.1786 27.0907 25.1786 26.6693ZM28.0813 13.7493L29.6533 8.82267L25.0593 10.7307L22.982 6.62933L20.9126 10.6847L17.032 8.76733L17.0833 13.758L18.4166 13.744L18.388 10.924L21.5026 12.4633L22.978 9.572L24.3893 12.4527L27.5086 11.1573L26.4686 14.4133L29.0046 15.734L27.8326 16.6667L28.6626 17.71L31.4413 15.5L28.0813 13.7493ZM25.7773 17.704C25.2726 17.8427 24.976 18.364 25.114 18.8687C25.1186 18.886 25.124 18.9027 25.1293 18.92C25.164 19.0873 25.242 19.2433 25.3553 19.3713L25.2086 19.7293C25.1346 19.72 25.0526 19.71 24.96 19.7L23.2266 15.5333C23.0086 15.0793 22.5506 14.7907 22.0466 14.7893H12.298C11.784 14.794 11.3186 15.096 11.1046 15.5633L9.38063 19.6933C9.27663 19.7047 9.18129 19.7153 9.09929 19.7253L8.95463 19.3707C9.06796 19.2427 9.14596 19.0867 9.18063 18.9193C9.34729 18.4233 9.08063 17.886 8.58396 17.7187C8.56729 17.7133 8.54996 17.708 8.53263 17.7033C7.90463 17.4767 7.20196 17.6213 6.71463 18.0773C6.35596 18.4867 6.39729 19.1087 6.80663 19.4673C6.81396 19.474 6.82196 19.48 6.82929 19.4867C7.08463 19.6207 7.36596 19.698 7.65329 19.712L7.82796 20.1387C7.77463 20.1853 7.72596 20.2367 7.68063 20.292L7.16863 20.9507C6.98663 21.1867 6.88796 21.476 6.88796 21.7733V29.818C6.88329 30.5453 7.46796 31.1387 8.19463 31.1453H10.534C11.2613 31.1387 11.846 30.5447 11.8406 29.818V29.3167C12.8786 29.3713 14.9373 29.4607 17.236 29.4607C19.5 29.4607 21.438 29.374 22.4326 29.3193V29.818C22.428 30.5453 23.012 31.1387 23.7393 31.1453H26.0793C26.8066 31.1387 27.3906 30.5447 27.386 29.818V21.7467C27.386 21.438 27.28 21.1393 27.0853 20.8993L26.5693 20.266C26.538 20.2313 26.5053 20.1987 26.47 20.1673L26.656 19.712C26.944 19.698 27.2253 19.6207 27.4806 19.4867C27.9006 19.1407 27.96 18.52 27.6146 18.1C27.6086 18.0927 27.602 18.0847 27.5953 18.0773C27.1073 17.622 26.4053 17.4773 25.7773 17.704ZM24.6073 22.2047C24.73 22.5733 24.7053 22.9753 24.5386 23.3267C24.4606 23.4847 24.3233 23.6053 24.1566 23.662C23.714 23.7907 23.1706 23.3407 22.974 22.6767C22.852 22.3073 22.8766 21.9053 23.0433 21.5533C23.1213 21.396 23.2586 21.2753 23.4246 21.2187C23.8693 21.0907 24.41 21.5413 24.6073 22.2047ZM12.298 16.1227L22.01 16.0767L23.462 19.566C22.106 19.47 20.068 19.38 17.166 19.38C14.2873 19.38 12.2446 19.468 10.8753 19.5633L12.298 16.1227ZM9.63596 22.2047C9.81063 21.618 10.2546 21.1967 10.6613 21.1967C10.7146 21.1967 10.768 21.204 10.8186 21.2187C10.9853 21.2753 11.1226 21.3953 11.2006 21.5533C11.3673 21.9047 11.392 22.3073 11.27 22.6767C11.072 23.34 10.5286 23.79 10.0873 23.662C9.92063 23.6053 9.78329 23.4853 9.70529 23.3273C9.53796 22.9753 9.51329 22.5733 9.63596 22.2047ZM8.22196 29.8193V28.8387C8.52329 28.9013 8.87863 28.9687 9.24596 29.0253C9.71529 29.0973 10.18 29.16 10.5266 29.2047L10.5353 29.814L8.22196 29.8193ZM23.0346 27.9487C22.8473 27.9613 20.3646 28.1287 17.2373 28.1287C14.0573 28.1287 11.3533 27.956 11.23 27.948C11.1213 27.9353 10.2973 27.838 9.44863 27.708C8.99263 27.638 8.54796 27.5473 8.22196 27.4753L8.22263 21.77L8.72663 21.12L8.82196 21.11C8.82663 21.1093 8.91929 21.094 9.10529 21.07C8.91396 21.3253 8.76863 21.6133 8.67729 21.9193C8.47663 22.5433 8.53063 23.2207 8.82663 23.8053C9.03063 24.1973 9.38396 24.4913 9.80663 24.6213C9.94529 24.662 10.0893 24.6827 10.234 24.6827C11.2006 24.6 12.0046 23.906 12.228 22.962C12.4286 22.338 12.3753 21.6607 12.0786 21.076C12.032 20.9927 11.9786 20.9127 11.9193 20.838C13.2066 20.7693 14.932 20.7147 17.166 20.7147C19.3626 20.7147 21.0566 20.768 22.3266 20.8347C22.2666 20.9107 22.2126 20.9913 22.1653 21.076C21.8686 21.6607 21.8146 22.3387 22.0153 22.9627C22.238 23.9067 23.042 24.6013 24.0086 24.6833C24.1533 24.6833 24.2973 24.6627 24.4366 24.622C24.86 24.492 25.2126 24.198 25.4173 23.8053C25.7133 23.2207 25.7666 22.5433 25.566 21.92C25.474 21.6113 25.3273 21.322 25.1326 21.0653C25.338 21.092 25.4426 21.1093 25.4473 21.11H25.538L26.054 21.7473L26.0726 27.4693C25.74 27.542 25.2806 27.6353 24.812 27.7073C23.936 27.842 23.0973 27.9407 23.0346 27.9487ZM23.7666 29.8193V29.2007C24.1066 29.1567 24.556 29.0953 25.0146 29.0247C25.396 28.966 25.7653 28.8953 26.0766 28.8313L26.08 29.8133L23.7666 29.8193Z" fill="#BC0909"/>
                      </svg>
                    </td>

                    <td>
                      <svg v-if="car.ivsrData" width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M24.4562 19.9944C24.0214 19.9944 23.6688 20.3469 23.6688 20.7817C23.6688 21.2166 24.0214 21.5691 24.4562 21.5691C24.891 21.5691 25.2436 21.2166 25.2436 20.7817C25.2436 20.3469 24.891 19.9944 24.4562 19.9944ZM9.43656 19.9944C9.00172 19.9944 8.64919 20.3469 8.64919 20.7817C8.64919 21.2166 9.00172 21.5691 9.43656 21.5691C9.8714 21.5691 10.2239 21.2166 10.2239 20.7817C10.2239 20.3493 9.87498 19.9974 9.44253 19.9944H9.43656ZM27.7429 11.9298C27.2388 11.4622 26.5165 11.3148 25.8699 11.5481C25.3515 11.6876 25.0437 12.2209 25.1833 12.7393C25.1887 12.7601 25.1953 12.7804 25.2018 12.8007C25.2448 13.0071 25.3486 13.1962 25.5001 13.3435L25.339 13.7312L24.9632 13.6895L23.1737 9.34701C22.965 8.91038 22.5242 8.63182 22.0404 8.63123H11.9716C11.4783 8.63302 11.031 8.92231 10.8264 9.37087L9.03691 13.6775L8.61937 13.7193L8.45832 13.3316C8.60982 13.1842 8.71361 12.9952 8.75656 12.7888C8.92954 12.2806 8.65814 11.7282 8.14993 11.5546C8.12965 11.5475 8.10937 11.5415 8.08849 11.5361C7.43951 11.3059 6.71656 11.458 6.21551 11.9298C5.84509 12.3503 5.88625 12.991 6.30618 13.3608C6.31572 13.3692 6.32526 13.3769 6.33481 13.3853C6.62768 13.538 6.95277 13.6197 7.28323 13.6239L7.46814 14.0772C7.39895 14.1333 7.33691 14.1971 7.28323 14.2681L6.75832 14.9481C6.58056 15.1741 6.48393 15.4539 6.48393 15.7414V24.0326C6.48035 24.7341 7.04702 25.3055 7.74849 25.3091C7.75028 25.3091 7.75267 25.3091 7.75446 25.3091H10.1404C10.8395 25.3026 11.4026 24.7317 11.399 24.0326V23.4361C12.4309 23.4898 14.6081 23.5853 17.0538 23.5853C19.4994 23.5853 21.5095 23.4898 22.4997 23.4361V24.0326C22.4932 24.7311 23.0539 25.3026 23.7523 25.3091C23.7541 25.3091 23.7565 25.3091 23.7583 25.3091H26.1443C26.8457 25.3222 27.4255 24.7645 27.4387 24.0624C27.4387 24.0523 27.4387 24.0422 27.4387 24.0326V15.6818C27.4249 15.4008 27.3229 15.1312 27.1464 14.9123L26.6155 14.2621L26.4783 14.1249L26.6751 13.6418C27.0056 13.6376 27.3307 13.5559 27.6236 13.4032C28.0614 13.0536 28.133 12.416 27.784 11.9781C27.7709 11.9614 27.7572 11.9453 27.7429 11.9298ZM24.7246 16.1649C24.8523 16.5574 24.8266 16.9833 24.653 17.3579C24.5618 17.5345 24.4061 17.6693 24.2176 17.7337C23.7225 17.8768 23.126 17.3937 22.9113 16.6719C22.7836 16.2788 22.8117 15.8523 22.9888 15.4789C23.0759 15.2976 23.2334 15.1598 23.4243 15.0972C23.4833 15.0882 23.5442 15.0882 23.6032 15.0972C24.1591 15.1885 24.6029 15.609 24.7246 16.1589V16.1649ZM11.9299 9.85403C11.943 9.83316 11.9651 9.82003 11.9895 9.81824H22.0225H22.0702L23.6211 13.5523C22.2313 13.4449 20.0899 13.3495 16.9881 13.3495C13.8864 13.3495 11.7748 13.4449 10.3671 13.5463L11.9299 9.85403ZM9.16217 16.1589C9.2773 15.5988 9.72526 15.1676 10.2895 15.0733C10.3468 15.0644 10.4053 15.0644 10.4625 15.0733C10.6534 15.136 10.8109 15.2738 10.898 15.4551C11.0775 15.8273 11.1055 16.2556 10.9755 16.6481C10.7369 17.4056 10.1404 17.8947 9.67516 17.7456C9.48488 17.6848 9.3274 17.5494 9.23972 17.3698C9.0566 16.9916 9.02856 16.5574 9.16217 16.1589ZM10.218 24.0326C10.2215 24.0732 10.1929 24.1102 10.1523 24.1161H7.75446C7.71389 24.1102 7.68526 24.0732 7.68884 24.0326V22.9053C8.02288 22.9768 8.42849 23.0544 8.88182 23.12C9.33516 23.1856 9.89586 23.2691 10.2597 23.3109L10.218 24.0326ZM26.2457 24.0326C26.2493 24.0732 26.2206 24.1102 26.1801 24.1161H23.7941C23.7535 24.1102 23.7249 24.0732 23.7285 24.0326V23.3109L25.0527 23.12C25.4762 23.0544 25.8878 22.9768 26.2457 22.9053V24.0326ZM26.2457 21.6824C25.8937 21.76 25.3987 21.8614 24.8857 21.9449C23.973 22.0821 23.0962 22.1835 23.0485 22.1895C22.8695 22.1895 20.3046 22.3744 17.0836 22.3744C13.8625 22.3744 10.9874 22.1954 10.8801 22.1895C10.7727 22.1835 9.90182 22.0702 9.01902 21.9449C8.512 21.8614 8.02288 21.76 7.67691 21.6884V15.7235C7.66916 15.7044 7.66916 15.6829 7.67691 15.6639L8.20182 14.9839C8.21495 14.9785 8.23046 14.9785 8.24358 14.9839L8.84007 14.9063C8.58417 15.1992 8.3933 15.5428 8.27937 15.9144C8.07835 16.5419 8.13203 17.2231 8.42849 17.8112C8.64144 18.1983 8.99993 18.4841 9.42463 18.6046C9.56003 18.6445 9.70081 18.6648 9.84217 18.6642C10.8091 18.5813 11.6132 17.8858 11.8345 16.9403C12.0349 16.3152 11.9818 15.6358 11.6853 15.0495C11.6132 14.9165 11.5225 14.7942 11.4169 14.6856C12.759 14.614 14.5843 14.5544 16.9881 14.5544C19.392 14.5544 21.1636 14.614 22.4759 14.6856C22.3697 14.7954 22.2778 14.9176 22.2015 15.0495C21.911 15.6382 21.8639 16.317 22.0702 16.9403C22.2927 17.8846 23.0962 18.5795 24.0625 18.6642C24.2057 18.6648 24.3482 18.6451 24.486 18.6046C24.9036 18.4769 25.2519 18.187 25.4523 17.7993C25.7488 17.2112 25.8025 16.53 25.6015 15.9025C25.478 15.5255 25.2746 15.1795 25.005 14.8884L25.679 14.9958L26.2457 15.646C26.251 15.6656 26.251 15.6859 26.2457 15.7056V21.6824ZM19.5292 17.1014H14.3874C13.5356 17.0942 12.7167 17.4295 12.1148 18.0319C11.6203 18.5282 11.3507 19.2046 11.3692 19.9049C11.3692 20.4 12.0552 21.4498 12.765 21.4498H21.1516C21.8615 21.4498 22.5295 20.4 22.5474 19.9049C22.5629 19.2052 22.2939 18.5294 21.8018 18.0319C21.2 17.4295 20.381 17.0942 19.5292 17.1014ZM21.0502 20.2807H12.8664C12.7447 20.1686 12.6421 20.0379 12.5622 19.893C12.5538 19.5172 12.7006 19.1551 12.9678 18.8909C13.3406 18.5079 13.853 18.2926 14.3874 18.2944H19.5292C20.0619 18.292 20.573 18.5073 20.9429 18.8909C21.1988 19.139 21.3485 19.4772 21.3604 19.8333C21.2882 20.0021 21.1833 20.1542 21.0502 20.2807Z" fill="#1A420A"/>
                      </svg>
                      <svg v-else width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.6266 23.0133H14.6406C13.79 23.0053 12.972 23.34 12.3713 23.9427C11.8766 24.44 11.6066 25.118 11.624 25.8187C11.64 26.342 12.3173 27.4073 13.0646 27.4073H21.2026C21.95 27.4073 22.6273 26.342 22.6433 25.8187C22.6606 25.1173 22.39 24.4393 21.8953 23.9427C21.2953 23.34 20.4773 23.0053 19.6266 23.0133ZM21.0693 26.0733H13.1986C13.1006 25.9713 13.0193 25.8553 12.9573 25.728C12.9666 25.4047 13.0993 25.0973 13.3293 24.87C13.6786 24.526 14.152 24.3373 14.642 24.346H19.628C20.118 24.3373 20.5913 24.526 20.9406 24.87C21.17 25.0973 21.3033 25.4047 21.3126 25.728C21.2486 25.8553 21.1673 25.9713 21.0693 26.0733ZM9.84396 25.906C9.42263 25.906 9.08063 26.248 9.08063 26.6693C9.08063 27.0907 9.42263 27.4327 9.84396 27.4327C10.2653 27.4327 10.6073 27.0907 10.6073 26.6693C10.6073 26.2473 10.2653 25.906 9.84396 25.906ZM25.1786 26.6693C25.1786 26.248 24.8366 25.906 24.4153 25.906C23.994 25.906 23.652 26.248 23.652 26.6693C23.652 27.0907 23.994 27.4327 24.4153 27.4327C24.8366 27.4327 25.1786 27.0907 25.1786 26.6693ZM28.0813 13.7493L29.6533 8.82267L25.0593 10.7307L22.982 6.62933L20.9126 10.6847L17.032 8.76733L17.0833 13.758L18.4166 13.744L18.388 10.924L21.5026 12.4633L22.978 9.572L24.3893 12.4527L27.5086 11.1573L26.4686 14.4133L29.0046 15.734L27.8326 16.6667L28.6626 17.71L31.4413 15.5L28.0813 13.7493ZM25.7773 17.704C25.2726 17.8427 24.976 18.364 25.114 18.8687C25.1186 18.886 25.124 18.9027 25.1293 18.92C25.164 19.0873 25.242 19.2433 25.3553 19.3713L25.2086 19.7293C25.1346 19.72 25.0526 19.71 24.96 19.7L23.2266 15.5333C23.0086 15.0793 22.5506 14.7907 22.0466 14.7893H12.298C11.784 14.794 11.3186 15.096 11.1046 15.5633L9.38063 19.6933C9.27663 19.7047 9.18129 19.7153 9.09929 19.7253L8.95463 19.3707C9.06796 19.2427 9.14596 19.0867 9.18063 18.9193C9.34729 18.4233 9.08063 17.886 8.58396 17.7187C8.56729 17.7133 8.54996 17.708 8.53263 17.7033C7.90463 17.4767 7.20196 17.6213 6.71463 18.0773C6.35596 18.4867 6.39729 19.1087 6.80663 19.4673C6.81396 19.474 6.82196 19.48 6.82929 19.4867C7.08463 19.6207 7.36596 19.698 7.65329 19.712L7.82796 20.1387C7.77463 20.1853 7.72596 20.2367 7.68063 20.292L7.16863 20.9507C6.98663 21.1867 6.88796 21.476 6.88796 21.7733V29.818C6.88329 30.5453 7.46796 31.1387 8.19463 31.1453H10.534C11.2613 31.1387 11.846 30.5447 11.8406 29.818V29.3167C12.8786 29.3713 14.9373 29.4607 17.236 29.4607C19.5 29.4607 21.438 29.374 22.4326 29.3193V29.818C22.428 30.5453 23.012 31.1387 23.7393 31.1453H26.0793C26.8066 31.1387 27.3906 30.5447 27.386 29.818V21.7467C27.386 21.438 27.28 21.1393 27.0853 20.8993L26.5693 20.266C26.538 20.2313 26.5053 20.1987 26.47 20.1673L26.656 19.712C26.944 19.698 27.2253 19.6207 27.4806 19.4867C27.9006 19.1407 27.96 18.52 27.6146 18.1C27.6086 18.0927 27.602 18.0847 27.5953 18.0773C27.1073 17.622 26.4053 17.4773 25.7773 17.704ZM24.6073 22.2047C24.73 22.5733 24.7053 22.9753 24.5386 23.3267C24.4606 23.4847 24.3233 23.6053 24.1566 23.662C23.714 23.7907 23.1706 23.3407 22.974 22.6767C22.852 22.3073 22.8766 21.9053 23.0433 21.5533C23.1213 21.396 23.2586 21.2753 23.4246 21.2187C23.8693 21.0907 24.41 21.5413 24.6073 22.2047ZM12.298 16.1227L22.01 16.0767L23.462 19.566C22.106 19.47 20.068 19.38 17.166 19.38C14.2873 19.38 12.2446 19.468 10.8753 19.5633L12.298 16.1227ZM9.63596 22.2047C9.81063 21.618 10.2546 21.1967 10.6613 21.1967C10.7146 21.1967 10.768 21.204 10.8186 21.2187C10.9853 21.2753 11.1226 21.3953 11.2006 21.5533C11.3673 21.9047 11.392 22.3073 11.27 22.6767C11.072 23.34 10.5286 23.79 10.0873 23.662C9.92063 23.6053 9.78329 23.4853 9.70529 23.3273C9.53796 22.9753 9.51329 22.5733 9.63596 22.2047ZM8.22196 29.8193V28.8387C8.52329 28.9013 8.87863 28.9687 9.24596 29.0253C9.71529 29.0973 10.18 29.16 10.5266 29.2047L10.5353 29.814L8.22196 29.8193ZM23.0346 27.9487C22.8473 27.9613 20.3646 28.1287 17.2373 28.1287C14.0573 28.1287 11.3533 27.956 11.23 27.948C11.1213 27.9353 10.2973 27.838 9.44863 27.708C8.99263 27.638 8.54796 27.5473 8.22196 27.4753L8.22263 21.77L8.72663 21.12L8.82196 21.11C8.82663 21.1093 8.91929 21.094 9.10529 21.07C8.91396 21.3253 8.76863 21.6133 8.67729 21.9193C8.47663 22.5433 8.53063 23.2207 8.82663 23.8053C9.03063 24.1973 9.38396 24.4913 9.80663 24.6213C9.94529 24.662 10.0893 24.6827 10.234 24.6827C11.2006 24.6 12.0046 23.906 12.228 22.962C12.4286 22.338 12.3753 21.6607 12.0786 21.076C12.032 20.9927 11.9786 20.9127 11.9193 20.838C13.2066 20.7693 14.932 20.7147 17.166 20.7147C19.3626 20.7147 21.0566 20.768 22.3266 20.8347C22.2666 20.9107 22.2126 20.9913 22.1653 21.076C21.8686 21.6607 21.8146 22.3387 22.0153 22.9627C22.238 23.9067 23.042 24.6013 24.0086 24.6833C24.1533 24.6833 24.2973 24.6627 24.4366 24.622C24.86 24.492 25.2126 24.198 25.4173 23.8053C25.7133 23.2207 25.7666 22.5433 25.566 21.92C25.474 21.6113 25.3273 21.322 25.1326 21.0653C25.338 21.092 25.4426 21.1093 25.4473 21.11H25.538L26.054 21.7473L26.0726 27.4693C25.74 27.542 25.2806 27.6353 24.812 27.7073C23.936 27.842 23.0973 27.9407 23.0346 27.9487ZM23.7666 29.8193V29.2007C24.1066 29.1567 24.556 29.0953 25.0146 29.0247C25.396 28.966 25.7653 28.8953 26.0766 28.8313L26.08 29.8133L23.7666 29.8193Z" fill="#BC0909"/>
                      </svg>
                    </td>

                </tr>
            </tbody>

        </table>

      <div class="pagination">
        <button @click="changePage(currentPage - 1)" :disabled="currentPage === 1">Forrige</button>
        <span>Page {{ currentPage }} of {{ totalPages }}</span>
        <button @click="changePage(currentPage + 1)" :disabled="currentPage === totalPages">Næste</button>
      </div>
    
    </div>

  </div>

  <div v-else>
    <CarDetails :car="carSelected" :deselectCar="deselectCar"/>
  </div>

  <div v-if="modalOpen" class="modal-overlay">
    <div class="modal" @submit.prevent="add">
      <form class="login" style="width: 300px;">
        <h2>Opret et salg</h2>
        <input type="text" v-model="inputProductionNumber" placeholder="Produktionsnummer">
        
        <p v-if="createMessage"> {{ createMessage }} </p>

        <button style="margin-top: 20px;" class="button" type="submit">Opret</button>
        <br>
        <button class="button" @click="closeModal">Gå tilbage</button>
      </form>
    </div>
  </div>

  </div>

  

</template>

<script setup>

import { ref, computed, onMounted } from 'vue';
import { fetchGet } from '../stores/util/fetch';
import { useCarsStore } from '@/stores/carStore';
import CarDetails from './CarDetails.vue';

const carsStore = useCarsStore();

const currentPage = ref(1);
const pageSize = ref(10);

const inputText = ref('');
const inputDate = ref('');

const createMessage = ref('')

const inputProductionNumber = ref('')

const carSelected = ref(null);
const modalOpen = ref(false);

const headers = [
  { value: 'onlineNr', label: 'Online nummer' },
  { value: 'model', label: 'Model' },
  { value: 'modelCode', label: 'Model kode' },
  { value: 'agreementDate', label: 'Dato' },
  { value: 'sharepointData', label: 'Sharepoint data'},
  { value: 'ivsrData', label: 'Ivsr data' }
]

const goToCar = (car) => {
  console.log(car)
  carSelected.value = car
} 

const deselectCar = () => {
  carSelected.value = null;
}

const cars = ref([])

onMounted(async() => {
  await carsStore.fetchCars();
  cars.value = carsStore.cars;
})

const paginatedCars = computed(() => {
  const startIndex = (currentPage.value - 1) * pageSize.value;
  return cars.value.slice(startIndex, startIndex + pageSize.value);
});

const totalPages = computed(() => {
  return Math.ceil(cars.value.length / pageSize.value);
});

const changePage = (page) => {
  if (page >= 1 && page <= totalPages.value) {
    currentPage.value = page;
  }
};

const filterCars = () => {
  let filteredCars = carsStore.cars;

  if(inputText.value) {
    filteredCars = filteredCars.filter(car => {
      const modelCode = car.modelCode ? car.modelCode.toLowerCase() : '';
      const modelDescription = car.modelDescription ? car.modelDescription.toLowerCase() : '';
      const brand = car.brand ? car.brand.toLowerCase() : '';
      const productionNumber = car.productionNumber ? car.productionNumber.toLowerCase() : '';

      return modelCode.includes(inputText.value.toLowerCase()) ||
             modelDescription.includes(inputText.value.toLowerCase()) ||
             brand.includes(inputText.value.toLowerCase()) ||
             productionNumber.includes(inputText.value.toLowerCase());
    })
  }

  if(inputDate.value) {
    console.log(inputDate.value)
    filteredCars = filteredCars.filter(car => {
      const agreementDate = car.purchaseAgreementDate;
      return agreementDate === inputDate.value;  
    })
  }
  console.log(filteredCars);

  cars.value = filteredCars
}


const openModal = () => {
  modalOpen.value = true;
}

const closeModal = () => {
  modalOpen.value = false;
}

const add = async () => {
  const postProductionNumber = inputProductionNumber.value;
  console.log(postProductionNumber)
  const post = await carsStore.postCar(postProductionNumber);
  createMessage.value = `${postProductionNumber} oprettet!`
}

</script>

<style>

.table-modal {
  max-width: 90%;
  margin: 50px auto;
  padding: 20px;
  background: #ffffff;
  border-radius: 5px;

}

.top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: gray solid;
  
}

.right {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 20px;
}

.inputs {
  display: flex;
  align-items: center;
  gap: 10px;
}

.inputs input {
  border: 1px solid #000000;
  border-radius: 30px;
  
  display: inline-block;
  font-weight: 600;
  font-size: 18px;
  
  line-height: 30px;
  text-align: center;
}

.inputs select {
  border: 1px solid #000000;
  border-radius: 30px;
  height: 30px;
  text-align: center;
  width: 300px;
}

.inputs input[type="text"] {
  padding: 0 18px;
}

.inputs input[type="date"] {
  padding: 0 15px;
  cursor: pointer;
}


.pagination {
  margin-top: 20px;
  text-align: center;
}

.pagination button {
  margin: 0 10px;
}

.first {
  display: flex;
}

.table-modal h2 {
    margin-top: 0px;
}

table {
  width: 100%;
  border-collapse: collapse;
}

tbody {
  cursor: pointer;
}

thead {
  background-color: #f4f4f4;
}

thead th {
  text-align: left;
  padding: 12px;
  border-bottom: 2px solid #ddd;
  font-size: 18px;
}

tbody tr {
  border-bottom: 1px solid #ddd;
}

tbody tr:nth-child(even) {
  background-color: #f9f9f9;
}

tbody tr:hover {
  background-color: #f1f1f1;
}

tbody td {
  padding: 10px;
  font-size: 16px;
  color: #333;
}

.table-modal {
  overflow-x: auto;
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  background: rgba(69, 69, 69, 0.5);
}

.modal {
  border-radius: 8px;
}

.blurred {
  filter: blur(5px);
  pointer-events: none;
  transition: filter 0.3s ease;
}

</style>